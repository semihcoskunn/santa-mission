<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil | Santa'nÄ±n Gizli GÃ¶revi</title>
    <link rel="icon" type="image/png" href="logo/santas-secret-mission.png">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="snowfall"></div>
    
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo" onclick="window.location.href='index.html'" style="cursor: pointer;">
                <span class="logo-icon">ğŸ…</span>
                <span class="logo-text">Santa'nÄ±n Gizli GÃ¶revi</span>
            </div>
            <div class="nav-right">
                <button class="back-btn" onclick="window.location.href='index.html'">ğŸ  Ana Sayfa</button>
                <button class="leaderboard-btn" onclick="window.location.href='leaderboard.html'">ğŸ† Liderlik</button>
                <button class="login-btn" id="loginBtn">Profil</button>
            </div>
        </div>
    </nav>

    <section class="profile-section" style="padding: 120px 20px 60px; min-height: 100vh;">
        <div class="container" style="max-width: 800px;">
            <div class="profile-card" style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img id="profilePhoto" src="" alt="Profil" style="width: 120px; height: 120px; border-radius: 50%; border: 5px solid #e74c3c; margin-bottom: 20px;">
                    <h1 id="profileName" style="color: #1e3c72; font-size: 2rem; margin-bottom: 10px;">YÃ¼kleniyor...</h1>
                    <p id="profileEmail" style="color: #666; font-size: 1.1rem;">YÃ¼kleniyor...</p>
                </div>

                <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 40px;">
                    <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; text-align: center; color: white;">
                        <div style="font-size: 2.5rem; font-weight: 900;" id="totalScore">0</div>
                        <div style="font-size: 1rem; opacity: 0.9; margin-top: 5px;">Toplam Skor</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 25px; border-radius: 15px; text-align: center; color: white;">
                        <div style="font-size: 2.5rem; font-weight: 900;" id="maxStreak">0</div>
                        <div style="font-size: 1rem; opacity: 0.9; margin-top: 5px;">ğŸ”¥ En YÃ¼ksek Seri</div>
                    </div>
                </div>

                <div style="margin-top: 40px; text-align: center;">
                    <button onclick="window.location.href='game.html'" style="background: linear-gradient(135deg, #dc3545, #c82333); border: none; color: white; padding: 15px 40px; font-size: 1.2rem; font-weight: 700; border-radius: 50px; cursor: pointer; box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);">
                        ğŸ® Oyuna BaÅŸla
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="auth.js"></script>
    <script>
        const user = getCurrentUser();
        if (!user) {
            window.location.href = 'index.html';
        } else {
            document.getElementById('profilePhoto').src = user.photo;
            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileEmail').textContent = user.email;
            document.getElementById('loginBtn').textContent = user.name;

            // API'den kullanÄ±cÄ± verilerini Ã§ek
            fetch(`https://btmzk05gh8.execute-api.eu-central-1.amazonaws.com/prod/user?userId=${user.userId}`)
                .then(res => res.json())
                .then(data => {
                    if (data.success && data.user) {
                        document.getElementById('totalScore').textContent = data.user.total_score || 0;
                        document.getElementById('maxStreak').textContent = data.user.max_streak || 0;
                    }
                })
                .catch(err => console.error('Profil yÃ¼klenemedi:', err));
        }

        // Kar efekti
        const snowfall = document.querySelector('.snowfall');
        const snowflakeTypes = ['â„', 'â…', 'âœ»'];
        for (let i = 0; i < 80; i++) {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.textContent = snowflakeTypes[i % 3];
            snowflake.style.left = Math.random() * 100 + '%';
            snowflake.style.top = Math.random() * -100 + '%';
            snowflake.style.animationDuration = (Math.random() * 8 + 6) + 's';
            snowflake.style.animationDelay = '0s';
            snowflake.style.fontSize = (Math.random() * 10 + 15) + 'px';
            snowflake.style.opacity = Math.random() * 0.6 + 0.3;
            snowfall.appendChild(snowflake);
        }
    </script>
</body>
</html>
